import{u as v,j as e,b as w,d as C,e as E,w as k,R as P,H as F,O as L,C as H,f as I,E as B,L as S,J as T,h as N}from"./index-d018bce5.js";function D({error:r}){const{t:s}=v("explore",{keyPrefix:"errors"});return r==null?null:e.jsx("div",{className:"bg-red white pa3 lh-copy",children:e.jsx("div",{children:r.toString(s)})})}function O(r){const s=r.split("");if(s.length<=9)return r;const l=s.slice(0,4).join(""),n=s.slice(s.length-4).join("");return{value:r,start:l,end:n}}const $=({value:r,title:s,style:l,...n})=>{l=Object.assign({},{textDecoration:"none"},l);const{start:a,end:o}=O(r);return e.jsxs("abbr",{title:s||r,style:l,...n,children:[e.jsx("span",{children:a}),e.jsx("span",{className:"o-20",children:"â€¦"}),e.jsx("span",{children:o})]})},R=({cid:r,pathBoundaries:s,localPath:l,hrefBase:n="#/explore",className:a="",...o})=>{const[i,...c]=s,h=s[s.length-1],x=m(n,r,s,0);return e.jsx("div",{...o,children:e.jsxs("div",{className:`sans-serif ${a}`,children:[e.jsxs(g,{cid:r,children:[e.jsx("a",{href:x,className:"monospace no-underline dark-gray o-50 glow",children:e.jsx($,{value:r})}),i?e.jsxs("div",{className:"dib",children:[e.jsx(p,{}),e.jsx(u,{path:i.path,hrefBase:x,sourceCid:r})]}):null,l&&s.length===0?e.jsxs("div",{className:"dib",children:[e.jsx(p,{}),e.jsx(u,{path:l,sourceCid:r,hrefBase:x})]}):null]}),c.map((d,t)=>{const j=m(n,r,s,t+1);return e.jsxs("div",{className:"dib",children:[e.jsx(p,{}),e.jsx(g,{cid:d.source,children:e.jsx(u,{path:d.path,sourceCid:d.source,hrefBase:j})})]},t)}),l&&s.length>0?e.jsxs("div",{className:"dib",children:[e.jsx(p,{}),e.jsx(g,{cid:h.target,children:e.jsx(u,{path:l,sourceCid:h.target,hrefBase:m(n,r,s,s.length)})})]}):null]})})};function m(r,s,l,n){const a=l.slice(0,n).map(i=>i.path).join("/"),o=r+"/"+s;return a?o+"/"+a:o}const g=({cid:r,children:s})=>{const l=w(r),n=C(l);return e.jsx("div",{className:"dib overflow-hidden",children:e.jsx("div",{className:"bb bw1 pb1",style:{borderColor:n},children:s})})},u=({path:r,hrefBase:s,sourceCid:l})=>{const n=[r];return e.jsx("div",{className:"dib",children:n.map((a,o)=>{const i=n.slice(0,o+1).join("/"),c=`${s}/${i}`;return e.jsxs("div",{className:"dib",children:[o!==0&&e.jsx(p,{}),e.jsx("a",{className:"dib no-underline dark-gray o-50 glow",title:l+"/"+i,href:c,children:a})]},c)})})},p=()=>e.jsx("div",{className:"dib ph2 gray v-top",children:"/"});class U extends P.Component{render(){let{t:s,explore:l,exploreIsLoading:n,explorePathFromHash:a,doExploreLink:o,runTour:i=!1,joyrideCallback:c,gatewayUrl:h,publicGatewayUrl:x="https://dweb.link"}=this.props;if(!a)return console.warn("[IPLD Explorer] ExplorePage loaded without a path to explore"),null;l=l||{},l=n?{}:l;const{error:d,targetNode:t,localPath:j,nodes:b,pathBoundaries:f}=l,y=b&&b[0]||null;return e.jsxs("div",{className:"nt4-l",children:[e.jsx(F,{children:e.jsx("title",{children:s("ExplorePage.title")})}),f&&t?e.jsx(R,{className:"joyride-explorer-crumbs",style:{padding:"15px 0 10px"},cid:y.cid,pathBoundaries:f,localPath:j}):e.jsx("div",{style:{height:54}}),e.jsxs("div",{className:"dt-l dt--fixed",children:[e.jsxs("div",{className:"dtc-l w-100 w-two-thirds-l pr3-l v-top",children:[e.jsx(D,{error:d}),t?e.jsx(L,{className:"joyride-explorer-node",style:{background:"#FBFBFB"},cid:t.cid,localPath:j,size:t.size,links:t.links,data:t.data,type:t.type,format:t.format,onLinkClick:o,gatewayUrl:h,publicGatewayUrl:x}):null,!d&&!t?e.jsx(H,{pastDelay:!0}):null]}),e.jsxs("div",{className:"dtc-l w-third-l v-top pt3 pt0-l",children:[t?e.jsx(I,{className:"joyride-explorer-cid",style:{background:"#FBFBFB",overflow:"hidden"},cid:t.cid}):null,t?e.jsx(B,{children:e.jsx(S,{className:"joyride-explorer-graph",style:{width:"100%",height:300},path:t.cid,links:t.links,onNodeClick:o})}):null]})]}),e.jsx(T,{run:i,steps:N.getSteps({t:s}),styles:N.styles,callback:c,continuous:!0,scrollToFirstStep:!0,showProgress:!0})]})}}const G=E("selectExplore","selectExploreIsLoading","selectExplorePathFromHash","doExploreLink",k("explore")(U));export{U as ExplorePage,G as default};
